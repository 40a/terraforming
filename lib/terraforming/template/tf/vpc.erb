<% client.describe_vpcs.vpcs.each do |vpc| -%>
resource "aws_vpc" "<%= normalize_module_name(name_from_tag(vpc, vpc.vpc_id)) %>" {
    cidr_block           = "<%= vpc.cidr_block %>"
    enable_dns_hostnames = <%= client.describe_vpc_attribute(vpc_id: vpc.vpc_id, attribute: :enableDnsHostnames).enable_dns_hostnames.value %>
    enable_dns_support   = <%= client.describe_vpc_attribute(vpc_id: vpc.vpc_id, attribute: :enableDnsSupport).enable_dns_support.value %>
    instance_tenancy     = "<%= vpc.instance_tenancy %>"

    tags {
<% vpc.tags.each do |tag| -%>
        <%= tag.key %> = "<%= tag.value %>"
<% end -%>
    }
}

<% end -%>
